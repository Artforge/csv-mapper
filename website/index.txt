h1. CSV Mapper


h2. What

CsvMapper is a small library intended to simplify the common steps involved with importing CSV files to a usable form in Ruby. 

h2. Installing

<pre syntax="ruby">sudo gem install csv-mapper</pre>

h2. The basics

CSV Mapper makes it easy to import data from CSV files directly to a collection of any type of Ruby object.
The simplest way to create mappings is declare the names of the attributes in the order corresponding to the CSV file column order.  For more complex mappings you can assign lambdas or methods to be used to convert data from the CSV row to the value of the declared attribute.

See "CsvMapper RDoc":rdoc for detailed mapping examples.

h2. Demonstration of usage

h3. Example CSV File Structure

<pre>
First Name,Last Name,Age
John,Doe,27
Jane,Doe,26
Bat,Man,52
...etc...
</pre>

h3. Simple Usage Example

<pre syntax="ruby">
require 'csv-mapper'

include CsvMapper

results = import('/path/to/file.csv') do
  start_at_row 1
  [first_name, last_name, age]
end

results.first.first_name  # John
results.first.last_name   # Doe
results.first.age         # 27
</pre>

h3. Import to ActiveRecord Example

Although CSV Mapper has no dependency on ActiveRecord; itâ€˜s easy to import a CSV file to ActiveRecord models and save them.

<pre syntax="ruby">
require 'csv-mapper'

# Define an ActiveRecord model
class Person < ActiveRecord::Base; end

include CsvMapper

results = import('/path/to/file.csv') do
  map_to Person # Map to the Person ActiveRecord class (defined above) instead of the default OpenStruct.
  after_row lambda{|row, person| person.save }  # Call this lambda and save each record after it's parsed.

  start_at_row 1
  [first_name, last_name, age]
end
</pre>

h2. Forum

"http://groups.google.com/group/csv-mapper":http://groups.google.com/group/csv-mapper

h2. How to submit patches

Read the "8 steps for fixing other people's code":http://drnicwilliams.com/2007/06/01/8-steps-for-fixing-other-peoples-code/ and for section "8b: Submit patch to Google Groups":http://drnicwilliams.com/2007/06/01/8-steps-for-fixing-other-peoples-code/#8b-google-groups, use the Google Group above.

You can fetch the source from:

* github: "http://github.com/pillowfactory/csv-mapper/tree/master":http://github.com/pillowfactory/csv-mapper/tree/master

<pre>git clone git://github.com/pillowfactory/csv-mapper.git</pre>

h3. Build and test instructions

<pre>cd csv-mapper
rake test
rake install_gem</pre>


h2. License

This code is free to use under the terms of the MIT license. 

h2. Contact

Comments are welcome. Send an email to "Luke Pillow":mailto:lpillow@gmail.com email via the "forum":http://groups.google.com/group/csv-mapper

